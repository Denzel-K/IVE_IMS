âœ… Packaging Your Offline Electron App with MySQL

Since your Information Management System (IMS) is an offline app built with Electron.js, Node.js, and MySQL, you have two main options to bundle MySQL so it works without requiring the user to install it separately.
ğŸ”¹ 1. Options for Running MySQL Offline
âœ… Option 1: Bundle MySQL with Your App (Recommended)

    Package MySQL Server within your app so users donâ€™t need to install it manually.
    Start MySQL automatically when the Electron app launches.

How?

    Include MySQL binaries in your packaged app.
    Run MySQL as a local service when the app starts.
    Use a pre-configured database inside the app folder.

âœ… Option 2: Use an Embedded Database (SQLite) (Alternative)

    If you donâ€™t need MySQLâ€™s full power, use SQLite instead.
    SQLite doesnâ€™t require installationâ€”it runs as a simple file.

ğŸ”¹ 2. Setting Up MySQL to Run Offline (Without Installation)
âœ… Step 1: Download and Include MySQL Binaries

    Download portable MySQL (Windows: Download).
    Extract the MySQL folder inside your app directory, e.g.:

    IVE_IMS/
    â”œâ”€â”€ backend/
    â”‚   â”œâ”€â”€ mysql/    â† Include MySQL portable here
    â”‚   â”œâ”€â”€ server.js
    â”œâ”€â”€ renderer/
    â”œâ”€â”€ main.js

âœ… Step 2: Start MySQL Automatically When the App Starts

Modify main.js to start MySQL automatically:

const { spawn } = require("child_process");
const path = require("path");

function startMySQL() {
  const mysqlPath = path.join(__dirname, "backend", "mysql", "bin", "mysqld");

  const mysqlProcess = spawn(mysqlPath, ["--defaults-file=my.ini"], {
    cwd: path.join(__dirname, "backend", "mysql"),
    detached: true,
    stdio: "ignore",
  });

  mysqlProcess.unref(); // Allows MySQL to keep running in the background
  console.log("âœ… MySQL server started locally.");
}

app.whenReady().then(() => {
  startMySQL(); // Start MySQL before launching Electron
  createMainWindow();
});

âœ… Step 3: Configure MySQL to Use a Local Database

    Inside backend/mysql/, create a my.ini file:

[mysqld]
port=3306
datadir=./data
socket=./mysql.sock

Initialize MySQL inside the app folder (run this once):

    cd IVE_IMS/backend/mysql/bin
    mysqld --initialize-insecure

âœ… Step 4: Connect to the Local MySQL Server

Modify db.js to connect to your embedded MySQL:

const mysql = require("mysql2");

const db = mysql.createConnection({
  host: "localhost",
  user: "root",
  password: "", // Empty password (since it's offline)
  database: "ive_ims",
  port: 3306,
  socketPath: "./backend/mysql/mysql.sock",
});

db.connect((err) => {
  if (err) {
    console.error("âŒ MySQL Connection Failed: ", err);
  } else {
    console.log("âœ… Connected to local MySQL database.");
  }
});

module.exports = db;

ğŸ”¹ 3. Packaging the App with Electron
âœ… Step 1: Use Electron Packager

After setting up MySQL, package the app using:

npx electron-packager . IVE_IMS --platform=win32 --arch=x64 --out=release-build --overwrite

âœ… Step 2: Make Sure MySQL Runs on Start

Electron apps canâ€™t run .exe binaries directly, so use a script to start MySQL before launching the app.

Modify your package.json:

"scripts": {
  "start": "node start-mysql.js && electron .",
  "package": "electron-packager . IVE_IMS --platform=win32 --arch=x64 --out=release-build --overwrite"
}

Create start-mysql.js:

const { spawn } = require("child_process");
const path = require("path");

const mysqlPath = path.join(__dirname, "backend", "mysql", "bin", "mysqld");

const mysqlProcess = spawn(mysqlPath, ["--defaults-file=my.ini"], {
  cwd: path.join(__dirname, "backend", "mysql"),
  detached: true,
  stdio: "ignore",
});

mysqlProcess.unref();
console.log("âœ… MySQL server started locally.");

ğŸ¯ Final Result

âœ… Your Electron app starts MySQL automatically.
âœ… Users donâ€™t need to install MySQL manually.
âœ… Data is stored locally inside your appâ€™s backend/mysql/ folder.
âœ… Your IMS runs offline, fully packaged. ğŸ‰
ğŸ’¡ Alternative: Use SQLite Instead

If this setup is too complex, you can use SQLite, which stores data in a file without requiring MySQL.

const sqlite3 = require("sqlite3").verbose();
const db = new sqlite3.Database("./backend/data/ims.db");

If youâ€™re not handling large-scale data, SQLite might be a simpler solution.

